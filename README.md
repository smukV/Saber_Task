# Тестовое задание на должность Программист игровой логики в Saber Interactive
## Задание 1
Реализуйте функции сериализации и десериализации двусвязного списка, заданного следующим образом:   
```
    class ListNode
    {
        public ListNode Prev;
        public ListNode Next;
        public ListNode Rand; // произвольный элемент внутри списка
        public string Data;
    }


    class ListRand
    {
        public ListNode Head;
        public ListNode Tail;
        public int Count;

        public void Serialize(FileStream s)
        {
        }

        public void Deserialize(FileStream s)
        {
        }
    }
```
Примечание: сериализация подразумевает сохранение и восстановление полной структуры списка, включая взаимное соотношение его элементов между собой — в том числе ссылок на Rand элементы.
Алгоритмическая сложность решения должна быть меньше квадратичной.
Нельзя добавлять новые поля в исходные классы ListNode, ListRand
### Решение
В сериализации мы составляем ассоциативный массив, в котором мы каждому узлу листа сопоставляем номер, нулевому казателю будет соответствовать -1. 
После этого записываем в файл поле Data и номер узла, на который ссылается поле Rand, для каждого узла.

При десериализации сначала считываем информацию из файла в массив пар указателей на узел и чисел. 
Далее последовательно проходя по массиву составляем список, при этом для того чтобы найти узел, на который ссылается поле Rand надо взять узел с индеком равным числу записанному в пару к текущему узлу, или nullptr если это число равно -1

---

## Задание 2
Составить BehaviourTree (в виде схемы) для NPC, который в спокойном состоянии патрулирует территорию, по окончанию каждого патруля (окончанием считается возвращение в стартовую точку) NPC может или заснуть на 2 минуты или продолжить патруль. 
Когда у NPC есть враг, он  атакует его, причем стрелять во врага может, только если у него есть патроны и враг на расстоянии меньше 30 метров. 
Если патронов нет, то NPC убегает от врага.

![](https://github.com/smukV/Saber_Task/blob/master/Sabet_BT.drawio.png?raw=true)
